@use "shared";

@mixin lifetime($transform) {
    @keyframes lifetime {
        0% {
            opacity: 0;
            transform: $transform scale(0.5);
        }
        5% {
            opacity: 1;
            transform: $transform scale(1.05);
            animation-timing-function: ease-out;
        }
        7%,
        90% {
            opacity: 1;
            transform: $transform scale(1);
        }
        100% {
            opacity: 0;
            transform: $transform scale(0.75);
        }
    }
}

.container {
    display: none;

    &.active {
        position: relative;
        top: 0.5rem;
        width: max-content;
        max-width: 12.5rem;
        padding: 0.5rem 0.75rem;

        border-radius: shared.$borderRadius;
        box-shadow: 0 0.75rem 1.5rem rgba(0, 0, 0, 0.25);

        // triangle to make it look like a speech bubble
        &::after {
            content: "";
            position: absolute;
            top: 0;
            border: 0.5rem solid transparent;
        }

        animation: lifetime var(--speechBubbleDurationMs, 5000ms) ease both;
    }

    // only show speech bubble on mobile in quiz or on desktop in sidebar
    @media (max-width: shared.$mobileBreakpoint) {
        &.quiz.active {
            display: inline-block;
            background-color: shared.$white;
            left: 1rem;

            &::after {
                left: 1rem;
                transform: translateY(-95%);
                border-bottom: 0.5rem solid shared.$white;
            }

            transform-origin: 0 0;
            @include lifetime("");
        }
    }
    @media not all and (max-width: shared.$mobileBreakpoint) {
        &.sidebar.active {
            display: inline-block;
            background-color: shared.$primaryLighter1;
            color: shared.$white;
            left: 50%;
            text-align: center;

            transform-origin: 50% 0;
            @include lifetime(translateX(-50%));

            &::after {
                border-bottom: 0.5rem solid shared.$primaryLighter1;
                left: 50%;
                transform: translateX(-50%) translateY(-95%);
            }
        }
    }
}
